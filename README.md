FastAPI Book Authoring Application
Это приложение позволяет создавать и читать авторов и их книги для авторизованных и аутентифицированных пользователей. Приложение продемонстрирует использование различных технологий и библиотек для создания API.

Используемые технологии
FastAPI — для создания API.
Celery — для обработки отложенных задач (например, отправки сообщений на email).
Redis — используется как брокер для хранения задач Celery.
PostgreSQL — база данных для хранения информации о книгах и авторах.
asyncpg — библиотека для асинхронного взаимодействия с PostgreSQL.
fastapi_users — библиотека для реализации аутентификации и авторизации пользователей.
Alembic — инструмент для миграций базы данных.
Pytest — для написания тестов.
Docker и Docker Compose — для контейнеризации приложения и удобства его запуска.
Особенности приложения
Авторизация и Аутентификация
Для управления пользователями и их правами доступа используется библиотека fastapi_users. Это позволяет реализовать регистрацию, вход в систему и защиту эндпоинтов, требующих аутентификации.

Приложение позволяет пользователям:

Создавать новых авторов.
Добавлять книги для авторов.
Просматривать список авторов и книг.
Эти операции доступны только для авторизованных пользователей.
Так же в приложении доступны два эндпоинта для демонстрации работы отложенных задач с использованием стандартного подхода в FastAPI библиотеки BackgroundTasks и библиотеки celery

Отложенные задачи с Celery
Для отправки сообщений на email использован Celery. Отправка email является отложенной задачей, которая выполняется асинхронно, и задачи обрабатываются с использованием брокера Redis.

Асинхронная работа с PostgreSQL
Для взаимодействия с базой данных используется asyncpg, что позволяет выполнять операции с базой данных асинхронно и повышает производительность приложения.

Миграции базы данных с Alembic
Для управления схемой базы данных используется Alembic, что позволяет эффективно управлять миграциями и изменениями в структуре данных.

Тестирование с Pytest
Для тестирования приложения использована библиотека Pytest. Все основные функции приложения протестированы, включая CRUD операции, аутентификацию и отправку email через Celery.

Контейнеризация с Docker
Для удобства развертывания приложение контейнеризировано с помощью Docker. В проекте есть Dockerfile для создания контейнера и docker-compose.yml для запуска приложения с необходимыми сервисами (PostgreSQL, Redis, Celery и по желанию - flower).

Как запустить приложение
Клонируйте репозиторий:

Скопируйте код
git clone https://github.com/Oleg-Spider-Man/fast_api.git

Перейдите в директорию проекта
cd fast_api

Запустите с использованием Docker:
Для запуска всех сервисов (PostgreSQL, Redis, приложение FastAPI, Celery) выполните:

Скопируйте код
docker-compose up --build

Использование API:

Приложение будет доступно по адресу:
http://localhost:8000/docs

Использование тестов:

Для запуска тестов нужно добавить в репозиторий проекта файл .env и заполнить его на основе файла .env.example в корне проекта.
в поле SMTP_USER нужно добавить эл.почту на которую будет приходить уведомление от celery.

в поле SMTP_PASSWORD нужно добавить пароль. Для получения SMTP_PASSWORD обычно требуется выполнить следующие шаги:
 1.Войдите в свой аккаунт электронной почты в браузере.
 2.Перейдите в настройки безопасности или два-факторную аутентификацию.
 3.Создайте специальный пароль приложения или ключ доступа.
 4.Используйте полученный пароль при настройке SMTP-соединения в вашем клиенте электронной почты или других приложениях.

в поле SECRET_JWT нужно добавить секретный ключ для функции get_jwt_strategy в файле my_app_new/auth_/auth.py. эта функция кодирует и декодирует токены.

в поле SECRET_AUTH_MNG нужно добавить секретный ключ для класса UserManager в файле my_app_new/auth_/manager.py. Он служит для сброса пароля и верефикации.

Далее нужно установить зависимости указанные в файле requirements.txt

После того как зависимости установлены и ваш файл .env готов, в корне проекта нужно выполнить команду для запуска тестов:

Скопируйте код
pytest